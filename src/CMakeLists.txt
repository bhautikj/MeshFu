PROJECT( MeshFuTest )

CMAKE_MINIMUM_REQUIRED(VERSION 2.8)
LIST(APPEND CMAKE_MODULE_PATH ${CMAKE_SOURCE_DIR}/cmake)
SET(CMAKE_BUILD_TYPE DEBUG)
INCLUDE(ListFiles)
INCLUDE(ConfigMacros)

SET(EXE ${PROJECT_NAME})

FIND_PACKAGE(cinder)
FIND_PACKAGE(meshFu)

SET (Boost_INCLUDE_DIR ${cinder_DIR}/boost)
SET (Boost_LIBRARY_DIRS ${cinder_DIR}/boost/libs)

FIND_PACKAGE(Boost REQUIRED)
INCLUDE_DIRECTORIES(${Boost_INCLUDE_DIRS})


SET (APP_SOURCES 
    desktopApp.cpp
    MetaApp.h
    MetaApp.cpp
    AppCore.cpp
    AppCore.h)


ADD_EXECUTABLE(${EXE} MACOSX_BUNDLE ${APP_SOURCES})
SET_TARGET_PROPERTIES(${EXE}
  PROPERTIES
  COMPILE_FLAGS "-fvisibility-inlines-hidden"
  OSX_ARCHITECTURES i386
  MACOSX_BUNDLE true
  MACOSX_BUNDLE_BUNDLE_NAME "${PROJECT_NAME}"
  # MACOSX_BUNDLE_INFO_STRING ""
  MACOSX_BUNDLE_BUNDLE_VERSION "1"
  MACOSX_BUNDLE_LONG_VERSION_STRING "1"
  MACOSX_BUNDLE_SHORT_VERSION_STRING "1"
  # MACOSX_BUNDLE_ICON_FILE "${CMAKE_CURRENT_SOURCE_DIR}/sean.icns"
  MACOSX_BUNDLE_GUI_IDENTIFIER "${EXE}"
  #MACOSX_BUNDLE_COPYRIGHT "artm"
  )

file(COPY "assets" DESTINATION ${PROJECT_NAME}.app/Contents/Resources)
file(COPY "skinMorph.vsh" DESTINATION ${PROJECT_NAME}.app/Contents/Resources)
file(COPY "skinMorph.fsh" DESTINATION ${PROJECT_NAME}.app/Contents/Resources)

# TODO hide this into a module
# this list is taken from an xcode project generated by tinder
FIND_AND_LINK_LIBRARY(Accelerate ${EXE})
FIND_AND_LINK_LIBRARY(AudioToolbox ${EXE})
FIND_AND_LINK_LIBRARY(AudioUnit ${EXE})
FIND_AND_LINK_LIBRARY(CoreAudio ${EXE})
FIND_AND_LINK_LIBRARY(QuickTime ${EXE})
FIND_AND_LINK_LIBRARY(QTKit ${EXE})
FIND_AND_LINK_LIBRARY(CoreVideo ${EXE})
FIND_AND_LINK_LIBRARY(Carbon ${EXE})
FIND_AND_LINK_LIBRARY(OpenGL ${EXE})
FIND_AND_LINK_LIBRARY(Cocoa ${EXE})
FIND_AND_LINK_LIBRARY(AppKit ${EXE})
FIND_AND_LINK_LIBRARY(CoreData ${EXE})
FIND_AND_LINK_LIBRARY(Foundation ${EXE})
TARGET_LINK_LIBRARIES(${EXE} "meshfu")

ADD_SUBDIRECTORY("MeshFuUtil")


